<div class="specialists-grid">
    {% for photographer in photographers %}
    <div class="specialist-card">
        <div class="card-header-profile">
            <div class="profile-main">
                <a href="{% url 'photographer_detail' photographer.pk %}" class="avatar-wrapper">
                    {% if photographer.profile_image %}
                        <img src="{{ photographer.profile_image.url }}" alt="{{ photographer.user.get_full_name|default:photographer.user.username }}">
                    {% else %}
                        <img src="https://ui-avatars.com/api/?name={{ photographer.user.get_full_name|default:photographer.user.username }}&background=e0bbd8&color=fff" alt="Avatar">
                    {% endif %}
                </a>
                <div class="profile-info">
                    <h3 class="profile-name">
                        <a href="{% url 'photographer_detail' photographer.pk %}">{{ photographer.user.get_full_name|default:photographer.user.username }}</a>
                        <span class="badge-pro">PRO</span>
                    </h3>
                    <p class="profile-location"><i class="fas fa-map-marker-alt"></i> {{ photographer.city|default:"Москва" }}</p>
                    <p class="profile-price">{{ photographer.price }} ₽/час</p>
                </div>
            </div>
      
        </div>
        
        <div class="card-portfolio">
            <div class="portfolio-grid">
                {% for photo in photographer.photos.all|slice:":3" %}
                    <a href="{% url 'photographer_detail' photographer.pk %}" class="portfolio-thumb">
                        <img src="{{ photo.image.url }}" alt="Portfolio">
                    </a>
                {% empty %}
                    <div class="portfolio-empty">Нет фото</div>
                    <div class="portfolio-empty"></div>
                    <div class="portfolio-empty"></div>
                {% endfor %}
            </div>
        </div>

        <div class="card-footer">
            <div class="stats">
                <i class="far fa-eye"></i> {{ photographer.views_count|default:0 }}
            </div>
            <a href="{% url 'photographer_detail' photographer.pk %}" class="btn btn-sm btn-outline-primary">Подробнее</a>
        </div>
    </div>
    {% empty %}
    <div class="no-results">
        <h3>Никого не найдено</h3>
        <p>Попробуйте изменить параметры поиска.</p>
    </div>
    {% endfor %}
</div>

{% if photographers.has_other_pages %}
<div class="pagination-wrapper">
    <ul class="pagination">
        {% if photographers.has_previous %}
            <li><a href="?page={{ photographers.previous_page_number }}{% if request.GET.specialization %}&specialization={{ request.GET.specialization }}{% endif %}{% if request.GET.city %}&city={{ request.GET.city }}{% endif %}{% if request.GET.price_min %}&price_min={{ request.GET.price_min }}{% endif %}{% if request.GET.price_max %}&price_max={{ request.GET.price_max }}{% endif %}{% if request.GET.language %}&language={{ request.GET.language }}{% endif %}" class="page-link prev">Предыдущая</a></li>
        {% else %}
            <li class="disabled"><span class="page-link prev">Предыдущая</span></li>
        {% endif %}

        {% for i in photographers.paginator.page_range %}
            {% if photographers.number == i %}
                <li class="active"><span class="page-link">{{ i }}</span></li>
            {% else %}
                <li><a href="?page={{ i }}{% if request.GET.specialization %}&specialization={{ request.GET.specialization }}{% endif %}{% if request.GET.city %}&city={{ request.GET.city }}{% endif %}{% if request.GET.price_min %}&price_min={{ request.GET.price_min }}{% endif %}{% if request.GET.price_max %}&price_max={{ request.GET.price_max }}{% endif %}{% if request.GET.language %}&language={{ request.GET.language }}{% endif %}" class="page-link">{{ i }}</a></li>
            {% endif %}
        {% endfor %}

        {% if photographers.has_next %}
            <li><a href="?page={{ photographers.next_page_number }}{% if request.GET.specialization %}&specialization={{ request.GET.specialization }}{% endif %}{% if request.GET.city %}&city={{ request.GET.city }}{% endif %}{% if request.GET.price_min %}&price_min={{ request.GET.price_min }}{% endif %}{% if request.GET.price_max %}&price_max={{ request.GET.price_max }}{% endif %}{% if request.GET.language %}&language={{ request.GET.language }}{% endif %}" class="page-link next">Следующая</a></li>
        {% else %}
            <li class="disabled"><span class="page-link next">Следующая</span></li>
        {% endif %}
    </ul>
</div>
{% endif %}
